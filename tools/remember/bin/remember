#!/usr/bin/env python3

import argparse
from datetime import datetime
from pathlib import Path

from llm_memory.store import Memory
from llm_memory.store.chroma_store import ChromaStore

def main():
    parser = argparse.ArgumentParser(description="Store information in long-term memory")
    parser.add_argument("update_type", choices=["new", "overwrite"], 
                       help="Whether to create new or update existing memory")
    parser.add_argument("memory_area", choices=["core", "human", "archival"],
                       help="Area to store the memory in")
    parser.add_argument("title", help="Unique title for the memory")
    parser.add_argument("text", help="Content to remember")
    parser.add_argument("--memory-dir", type=str,
                       default=str(Path.home() / ".memory"),
                       help="Directory for storing memories (default: ~/.memory)")
    
    args = parser.parse_args()
    memory_dir = Path(args.memory_dir).expanduser().resolve()
    
    memory = Memory(
        title=args.title,
        text=args.text,
        memory_area=args.memory_area,
        created_at=datetime.utcnow()
    )
    
    store = ChromaStore(persist_directory=str(memory_dir))
    store.store(memory, args.update_type)

if __name__ == "__main__":
    main()
